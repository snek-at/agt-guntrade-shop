"use strict";(self.webpackChunkagt_guntrade_shop=self.webpackChunkagt_guntrade_shop||[]).push([[449],{73495:function(e,t,n){var i=n(15861),r=n(87757),s=n.n(r),a=n(16985),o=n(28569),l=n(3013),c=n(98408),u=n(14317),d=n(67294),h=n(29802),m=n(56839),f=n(36253),g=n(34288),p=n(11900),b=n(88837);t.Z=function(e){var t=e.isOpen,n=e.heading,r=e.text,v=e.wishlist,w=e.onClose,Z=(0,u.pm)(),x={firstName:"",lastName:"",email:"",message:"Sehr geehrtes AGT Team,\nich würde gerne ein Kaufangebot für folgende Artikel einholen:\n\n"+v.map((function(e){return"- "+e.quantity+" x "+e.title})).join("\n")+"\n\n\nMit freundlichen Grüßen!\n    ",agbChecked:!1},y=(0,g.cI)({defaultValues:x}),I=y.handleSubmit,W=y.reset,B=y.register,C=y.formState,N=C.errors,X=C.isSubmitting;d.useEffect((function(){W(x)}),[v]);var k=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,r,a,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firstName,i=t.lastName,r=t.email,a=t.message,o="Kaufanfrage für "+v.map((function(e){return e.title})).join(", "),l="\nAnfrage von "+n+" "+i+" ("+r+") über AGT Shop.\n\n<== Inhalt der Anfrage ==>\n\n"+a+"\n",e.next=5,(0,p.C)({fromEmail:r,name:n+" "+i,subject:o,message:l});case 5:Z({title:"Anfrage erfolgreich versendet",description:"Vielen Dank für Ihre Anfrage. Wir werden uns so schnell wie möglich bei Ihnen melden.",status:"success",duration:9e3,isClosable:!0}),w();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.BX)(c.u_,{isOpen:t,onClose:function(){w()},isCentered:!0,scrollBehavior:"inside",children:[(0,b.tZ)(c.ZA,{}),(0,b.BX)(c.hz,{bg:"gray.50",borderRadius:"5px",minH:"60vh",maxW:{base:"90vw",md:"64vw",xl:"60vw"},children:[(0,b.tZ)(c.xB,{ml:"5",fontWeight:"bold",children:n}),(0,b.tZ)(c.ol,{}),(0,b.BX)(c.fe,{mx:"5",mb:"5",children:[(0,b.tZ)(l.Text,{mb:"3",children:r}),(0,b.BX)("form",{onSubmit:I(k),children:[(0,b.BX)(l.Flex,{mb:"3",direction:{base:"column",md:"row"},children:[(0,b.tZ)(l.Box,{mr:"5",w:{base:"100%",md:"50%"},children:(0,b.BX)(h.NI,{isInvalid:!!N.firstName,children:[(0,b.tZ)(h.lX,{htmlFor:"first-name",children:"Vorname"}),(0,b.tZ)(o.II,Object.assign({bg:"white",placeholder:"Max"},B("firstName",{required:!0}),{borderColor:"#D4D4D9"}))]})}),(0,b.tZ)(l.Box,{w:{base:"100%",md:"50%"},children:(0,b.BX)(h.NI,{isInvalid:!!N.lastName,children:[(0,b.tZ)(h.lX,{htmlFor:"last-name",children:"Nachname"}),(0,b.tZ)(o.II,Object.assign({bg:"white",placeholder:"Mustermann"},B("lastName",{required:!0}),{borderColor:"#D4D4D9"}))]})})]}),(0,b.tZ)(l.Box,{mb:"3",children:(0,b.BX)(h.NI,{isInvalid:!!N.email,children:[(0,b.tZ)(h.lX,{htmlFor:"email",children:"Email Adresse"}),(0,b.tZ)(o.II,Object.assign({bg:"white",placeholder:"max.mustermann@example.at"},B("email",{required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i}),{borderColor:"#D4D4D9"}))]})}),(0,b.tZ)(l.Box,{mb:"5",children:(0,b.BX)(h.NI,{isInvalid:!!N.message,children:[(0,b.tZ)(h.lX,{htmlFor:"message",children:"Nachricht"}),(0,b.tZ)(f.g,Object.assign({bg:"white",resize:"vertical",borderColor:"#D4D4D9",h:"30vh"},B("message",{required:!0})))]})}),(0,b.BX)(l.Box,{children:[(0,b.BX)(h.NI,{isInvalid:!!N.agbChecked,children:[(0,b.BX)(l.Flex,{children:[(0,b.tZ)(m.XZ,Object.assign({},B("agbChecked",{required:!0}),{borderColor:"#D4D4D9",bg:"white",h:"fit-content",mt:"0.5",mr:"2"})),(0,b.tZ)(l.Text,{mt:"-2px",children:"Ich habe die AGBs gelesen und stimme der Verarbeitung meiner Daten zu."})]}),N.agbChecked&&(0,b.tZ)(h.J1,{children:"Bitte akzeptieren Sie die AGBs"})]}),(0,b.tZ)(a.zx,{mt:"4",colorScheme:"agt.grayScheme",type:"submit",isLoading:X,children:"Absenden"})]})]})]})]})]})}},86504:function(e,t,n){n.r(t);var i=n(36459),r=(n(67294),n(95422)),s=n(16511),a=n(57784),o=n(73495),l=n(64731),c=n(88837);t.default=(0,l.connectPage)((function(e){(0,i.Z)(e);var t=(0,s.E)(),n=t.wishlist,l=t.updateQuantity,u=t.removeFromWishlist,d=(0,r.qY)(),h=d.isOpen,m=d.onOpen,f=d.onClose;return(0,c.BX)(c.HY,{children:[(0,c.tZ)(a.l,{items:n,onRemove:u,onQuantityChange:l,onRequestNow:function(){m()},activePath:""}),(0,c.tZ)(o.Z,{wishlist:n,isOpen:h,heading:(0,c.tZ)("p",{children:"Kaufanfrage (unverbindlich)"}),text:"",onClose:function(){return f()}})]})}),{displayName:"WishlistPage"})},11900:function(e,t,n){n.d(t,{C:function(){return a}});var i=n(15861),r=n(87757),s=n.n(r),a=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fromEmail,i=t.name,r=t.subject,a=t.message,e.next=3,fetch("https://api.snek.at/mail/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to_email:"nicoschett@icloud.com",reply_to_email:n,subject:i+" - "+r,content:a})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},16511:function(e,t,n){n.d(t,{E:function(){return s}});var i=n(67294),r=function(){function e(){}return e.setWishlist=function(t){"undefined"!=typeof window&&localStorage.setItem(e.key,JSON.stringify(t))},e.getWishlist=function(){return"undefined"==typeof window?[]:JSON.parse(window.localStorage.getItem(e.key)||"[]")},e.addToWishlist=function(t){var n=e.getWishlist();n.push(t),e.setWishlist(n)},e.updateQuantity=function(t,n){var i=e.getWishlist(),r=i.find((function(e){return e.id===t}));r&&(r.quantity=n),e.setWishlist(i)},e.removeFromWishlist=function(t){var n=e.getWishlist(),i=n.findIndex((function(e){return e.id===t}));-1!==i&&(n.splice(i,1),e.setWishlist(n))},e}();function s(){var e=i.useState(r.getWishlist()),t=e[0],n=e[1];return i.useEffect((function(){var e=r.getWishlist();n(e)}),[]),{wishlist:t,addToWishlist:function(e){r.addToWishlist(e),n(r.getWishlist())},updateQuantity:function(e,t){r.updateQuantity(e,t),n(r.getWishlist())},removeFromWishlist:function(e){r.removeFromWishlist(e),n(r.getWishlist())}}}r.key="wishlist"},36459:function(e,t,n){function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}n.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=component---src-pages-wishlist-tsx-5e381622f123f2bcc2ac.js.map