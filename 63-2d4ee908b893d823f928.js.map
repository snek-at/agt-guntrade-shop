{"version":3,"file":"63-2d4ee908b893d823f928.js","mappings":"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","sources":["webpack://agt-guntrade-shop/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/fields/ImageField/components/UpdateModal/index.tsx","webpack://agt-guntrade-shop/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/fields/ImageField/InteractiveImage.tsx"],"sourcesContent":["import {\n  Box,\n  Button,\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Image,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Textarea,\n  useToast\n} from '@chakra-ui/react'\nimport {useSnekFinder} from '@jaenjs/snek-finder'\nimport * as React from 'react'\nimport {useForm} from 'react-hook-form'\n\ntype FormData = {\n  image: string\n  title: string\n  description: string\n}\n\nexport interface UpdateModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onUpdate: (data: FormData) => void\n  onDelete: () => void\n  data: FormData\n}\n\nexport const UpdateModal = ({\n  isOpen,\n  onClose,\n  onUpdate,\n  onDelete,\n  data\n}: UpdateModalProps) => {\n  const toast = useToast()\n\n  const [defaultValues, setDefaultValues] = React.useState(data)\n\n  React.useEffect(() => {\n    setDefaultValues(data)\n    reset(data)\n  }, [data])\n\n  const {\n    register,\n    reset,\n    handleSubmit,\n    formState: {errors, isSubmitting, isDirty}\n  } = useForm<FormData>({\n    defaultValues\n  })\n\n  const finder = useSnekFinder({\n    mode: 'selector',\n    onAction: action => {\n      if (action.type === 'SELECTOR_SELECT') {\n        onUpdate({\n          image: action.payload.item.src,\n          title: action.payload.item.name,\n          description: action.payload.item.description || ''\n        })\n      }\n    }\n  })\n\n  const handleDelete = () => {\n    onDelete()\n\n    toast({\n      title: 'Deleted',\n      description: 'The image has been cleared from the field.',\n      status: 'success',\n      duration: 5000,\n      isClosable: true\n    })\n\n    onClose()\n  }\n\n  const onSubmit = (values: FormData) => {\n    onUpdate(values)\n\n    toast({\n      title: 'Success',\n      description: 'The image has been updated',\n      status: 'success',\n      duration: 5000,\n      isClosable: true\n    })\n\n    onClose()\n  }\n\n  const handleImageClick = () => {\n    finder.toggleSelector()\n  }\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} size={'3xl'}>\n      {finder.finderElement}\n      <ModalOverlay />\n      <ModalContent>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <ModalHeader>Update Image</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody>\n            <Flex>\n              <Box flex=\"1\" p=\"4\">\n                <FormControl isRequired isInvalid={!!errors.title}>\n                  <FormLabel htmlFor=\"title\">Title</FormLabel>\n                  <Input\n                    placeholder=\"Title\"\n                    {...register('title', {\n                      required: 'This is required',\n                      maxLength: {value: 80, message: 'Max length is 80'}\n                    })}\n                  />\n                  <FormErrorMessage>{errors?.title?.message}</FormErrorMessage>\n                </FormControl>\n                <FormControl isRequired isInvalid={!!errors.description}>\n                  <FormLabel htmlFor=\"description\">Description (alt)</FormLabel>\n                  <Textarea\n                    maxH=\"15vh\"\n                    placeholder=\"Description\"\n                    {...register('description', {\n                      required: 'This is required',\n                      maxLength: {value: 140, message: 'Max length is 140'}\n                    })}\n                  />\n                  <FormErrorMessage>\n                    {errors?.description?.message}\n                  </FormErrorMessage>\n                </FormControl>\n              </Box>\n              <Image\n                h=\"300px\"\n                w=\"300px\"\n                cursor={isSubmitting ? 'not-allowed' : 'pointer'}\n                objectFit={'cover'}\n                src={data.image}\n                onClick={handleImageClick}\n              />\n            </Flex>\n          </ModalBody>\n\n          <ModalFooter>\n            <Button mr=\"4\" colorScheme=\"red\" onClick={handleDelete}>\n              Delete\n            </Button>\n\n            <Button\n              colorScheme=\"blue\"\n              mr={4}\n              isLoading={isSubmitting}\n              isDisabled={!isDirty}\n              type=\"submit\">\n              Save\n            </Button>\n          </ModalFooter>\n        </form>\n      </ModalContent>\n    </Modal>\n  )\n}\n\nexport default UpdateModal\n","import {Box, useDisclosure} from '@chakra-ui/react'\nimport {withSnekFinder} from '../../../../withSnekFinder'\nimport {useSnekFinder} from '@jaenjs/snek-finder'\nimport {getSrc} from 'gatsby-plugin-image'\nimport React from 'react'\nimport {ImageFieldData} from '.'\nimport UpdateModal from './components/UpdateModal'\n\nexport interface IInteractiveImageProps {\n  data: {\n    gatsbyImage: ImageFieldData['gatsbyImage']\n    internalImageUrl?: string | null\n    alt?: string\n    title?: string\n  }\n  handleUpdateValue: (data: {\n    internalImageUrl?: string | null\n    alt?: string\n    title?: string\n  }) => void\n}\n\nexport const InteractiveImage: React.FC<IInteractiveImageProps> = withSnekFinder(\n  ({data, handleUpdateValue, children}) => {\n    const updateDisclosure = useDisclosure()\n\n    const finder = useSnekFinder({\n      mode: 'selector',\n      onAction: action => {\n        if (action.type === 'SELECTOR_SELECT') {\n          handleUpdateValue({\n            internalImageUrl: action.payload.item.src,\n            title: action.payload.item.name,\n            alt: action.payload.item.description\n          })\n        }\n      }\n    })\n\n    const handleBoxClick = () => {\n      if (updateable) {\n        updateDisclosure.onOpen()\n      } else {\n        finder.toggleSelector()\n      }\n    }\n\n    const gatsbyImageSrc = data.gatsbyImage && getSrc(data.gatsbyImage)\n    let updateable = false\n\n    // check if internalImageUrl is a string\n    if (\n      data.internalImageUrl !== null &&\n      (!!data?.internalImageUrl || !!data.gatsbyImage)\n    ) {\n      updateable = true\n    }\n\n    return (\n      <>\n        {finder.finderElement}\n        <UpdateModal\n          {...updateDisclosure}\n          data={{\n            image: data.internalImageUrl || gatsbyImageSrc || '',\n            description: data?.alt || '',\n            title: data?.title || ''\n          }}\n          onUpdate={({image: internalImageUrl, description: alt, title}) => {\n            handleUpdateValue({\n              internalImageUrl,\n              alt,\n              title\n            })\n          }}\n          onDelete={() => handleUpdateValue({internalImageUrl: null})}\n        />\n\n        <Box onClick={handleBoxClick}>{<>{children}</>}</Box>\n      </>\n    )\n  }\n)\n\nexport default InteractiveImage\n"],"names":["isOpen","onClose","onUpdate","onDelete","data","toast","useToast","React","defaultValues","setDefaultValues","reset","useForm","register","handleSubmit","formState","errors","isSubmitting","isDirty","finder","useSnekFinder","mode","onAction","action","type","image","payload","item","src","title","name","description","size","finderElement","onSubmit","values","status","duration","isClosable","Flex","Box","flex","p","isRequired","isInvalid","htmlFor","placeholder","required","maxLength","value","message","maxH","h","w","cursor","objectFit","onClick","toggleSelector","mr","colorScheme","isLoading","isDisabled","InteractiveImage","withSnekFinder","handleUpdateValue","children","updateDisclosure","useDisclosure","internalImageUrl","alt","gatsbyImageSrc","gatsbyImage","getSrc","updateable","onOpen"],"sourceRoot":""}